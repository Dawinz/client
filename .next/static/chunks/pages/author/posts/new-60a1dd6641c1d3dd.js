(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9264],{73453:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/author/posts/new",function(){return n(98364)}])},88446:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(34051),o=n.n(r),a=n(85893),i=n(67294),s=n(97183),l=n(68157),c=n(41664),u=n(61715),d=n(34146),h=n(42952),f=n(57184),p=n(88916),x=n(71255),v=n(87547),j=l.Z.SubMenu,m=s.Z.Sider,g=function(){var e,t,n=(0,i.useContext)(d.V),r=n[0],o=(n[1],(0,i.useState)(!1)),s=o[0],g=o[1],w=(0,i.useState)(""),Z=w[0],y=w[1],b=(0,u.Lm)();(0,i.useEffect)((function(){y(window.location.pathname)}),[window.location.pathname]),(0,i.useEffect)((function(){b<800?g(!0):b>800&&g(!1)}),[b<800]);var S=function(e){return"".concat(Z===e&&"active")};return(0,a.jsx)(m,{collapsible:!0,collapsed:s,onCollapse:function(){return g(!s)},children:(0,a.jsxs)(l.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:s,children:[(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(h.Z,{}),children:(0,a.jsx)(c.default,{href:"/author",children:(0,a.jsx)("a",{className:S("/author"),children:"Dashboard"})})},"1"),(0,a.jsxs)(j,{icon:(0,a.jsx)(f.Z,{}),title:"Posts",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/author/posts",children:(0,a.jsx)("a",{className:S("/author/posts"),children:"All Posts"})})},"3"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/author/posts/new",children:(0,a.jsx)("a",{className:S("/author/posts/new"),children:"Add New"})})},"4")]},"2"),(0,a.jsxs)(j,{icon:(0,a.jsx)(p.Z,{}),title:"Media",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/author/media/library",children:(0,a.jsx)("a",{className:S("/author/media/library"),children:"Library"})})},"7"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/author/media/new",children:(0,a.jsx)("a",{className:S("/author/media/new"),children:"Add New"})})},"8")]},"6"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(x.Z,{}),children:(0,a.jsx)(c.default,{href:"/author/comments",children:(0,a.jsx)("a",{className:S("/author/comments"),children:"Comments"})})},"9"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(v.Z,{}),children:(0,a.jsx)(c.default,{href:"/author/".concat(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e._id),children:(0,a.jsx)("a",{className:S("/author/".concat(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t._id)),children:"Profile"})})},"13")]})})},w=n(11163),Z=n(9669),y=n.n(Z),b=n(27161);function S(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,o)}var C=s.Z.Content;var k=function(e){var t=e.children,n=(0,i.useContext)(d.V),r=n[0],l=(n[1],(0,i.useState)(!0)),c=l[0],u=l[1],h=(0,w.useRouter)();(0,i.useEffect)((function(){(null===r||void 0===r?void 0:r.token)&&f()}),[null===r||void 0===r?void 0:r.token]);var f=function(){var e,t=(e=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y().get("/current-author");case 3:e.sent.data,u(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),h.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,s,"next",e)}function s(e){S(a,r,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return c?(0,a.jsx)(b.Z,{}):(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(g,{}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(C,{style:{padding:"10px"},children:t})})]})}},9911:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(85893),i=n(67294),s=n(9835),l=n(97183),c=n(71230),u=n(15746),d=n(79531),h=n(71577),f=n(67691),p=n(14538),x=n(28819),v=n.n(x),j=n(5162),m=n(9669),g=n.n(m),w=n(45771),Z=n(74931),y=n(11163),b=n(88484),S=n(16853),C=n(76329);function k(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){k(a,r,o,i,s,"next",e)}function s(e){k(a,r,o,i,s,"throw",e)}i(void 0)}))}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}var P=s.Z.Option;l.Z.Content,l.Z.Sider;t.Z=function(e){var t,n=e.page,r=void 0===n?"admin":n,l=(0,i.useContext)(j.N),x=l[0],m=(l[1],(0,i.useContext)(C.Y)),k=m[0],I=m[1],_=(0,i.useState)(function(){if(localStorage.getItem("post-title"))return JSON.parse(localStorage.getItem("post-title"))}()),M=_[0],E=_[1],A=(0,i.useState)(function(){if(localStorage.getItem("post-content"))return JSON.parse(localStorage.getItem("post-content"))}()),J=A[0],T=A[1],V=(0,i.useState)([]),D=V[0],L=V[1],R=(0,i.useState)([]),X=R[0],z=R[1],F=(0,i.useState)(!1),G=F[0],K=F[1],Y=(0,i.useState)(!1),q=Y[0],B=Y[1],H=(0,y.useRouter)();(0,i.useEffect)((function(){Q()}),[]);var Q=function(){var e=N(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().get("/categories");case 3:t=e.sent.data,z(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=N(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=5,g().post("/create-post",{title:M,content:J,categories:D,featuredImage:null===k||void 0===k||null===(t=k.selected)||void 0===t?void 0:t._id});case 5:(null===(n=e.sent.data)||void 0===n?void 0:n.error)?(Z.Am.error(null===n||void 0===n?void 0:n.error),B(!1)):(Z.Am.success("Post created successfully"),localStorage.removeItem("post-title"),localStorage.removeItem("post-content"),I(O({},k,{selected:null})),H.push("/".concat(r,"/posts"))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),Z.Am.error("Post create failed. Try again."),B(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)(u.Z,{span:14,offset:1,children:[(0,a.jsx)("h1",{children:"Create new post"}),(0,a.jsx)(d.Z,{size:"large",value:M,placeholder:"Give your post a title",onChange:function(e){E(e.target.value),localStorage.setItem("post-title",JSON.stringify(e.target.value))}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"editor-scroll",children:(0,a.jsx)(v(),{dark:"light"!==x,defaultValue:J,onChange:function(e){T(e()),localStorage.setItem("post-content",JSON.stringify(e()))},uploadImage:w.I})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),(0,a.jsxs)(u.Z,{span:6,offset:1,children:[(0,a.jsx)(h.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return K(!0)},children:"Preview"}),(0,a.jsxs)(h.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return I(O({},k,{showMediaModal:!0}))},children:[(0,a.jsx)(b.Z,{})," Featured Image"]}),(0,a.jsx)("h4",{children:"Categories"}),(0,a.jsx)(s.Z,{mode:"multiple",allowClear:!0,placeholder:"Select categories",style:{width:"100%"},onChange:function(e){return L(e)},children:X.map((function(e){return(0,a.jsx)(P,{children:e.name},e.name)}))}),(null===k||void 0===k?void 0:k.selected)&&(0,a.jsx)("div",{style:{marginTop:"15px"},children:(0,a.jsx)(f.Z,{width:"100%",src:null===k||void 0===k||null===(t=k.selected)||void 0===t?void 0:t.url})}),(0,a.jsx)(h.Z,{loading:q,style:{margin:"10px 0px 10px 0px",width:"100%"},type:"primary",onClick:U,children:"Publish"})]}),(0,a.jsxs)(p.Z,{title:"Preview",centered:!0,visible:G,onOk:function(){return K(!1)},onCancel:function(){return K(!1)},width:720,footer:null,children:[(0,a.jsx)("h1",{children:M}),(0,a.jsx)(v(),{dark:"light"!==x,defaultValue:J,readOnly:!0})]}),(0,a.jsx)(p.Z,{visible:k.showMediaModal,title:"Media",onOk:function(){return I(O({},k,{showMediaModal:!1}))},onCancel:function(){return I(O({},k,{showMediaModal:!1}))},width:720,footer:null,children:(0,a.jsx)(S.Z,{})})]})}},98364:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(88446),a=n(9911);t.default=function(){return(0,r.jsx)(o.Z,{children:(0,r.jsx)(a.Z,{page:"author"})})}}},function(e){e.O(0,[5453,7624,8773,8874,6994,9835,8231,7910,4209,4551,4687,301,8973,8819,7594,9774,2888,179],(function(){return t=73453,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
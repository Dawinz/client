(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7102],{19791:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/new",function(){return r(42553)}])},27161:function(e,n,r){"use strict";var t=r(85893),s=r(67294),a=r(11163);n.Z=function(e){var n=e.path,r=void 0===n?"/":n,i=(0,s.useState)(3),c=i[0],l=i[1],u=(0,a.useRouter)();return(0,s.useEffect)((function(){var e=setInterval((function(){l(c-1)}),1e3);return 0===c&&(clearInterval(e),u.push(r)),function(){return clearInterval(e)}}),[c]),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsxs)("p",{children:["Redirecting in ",c," seconds"]})})}},21133:function(e,n,r){"use strict";r.d(n,{Z:function(){return I}});var t=r(34051),s=r.n(t),a=r(85893),i=r(67294),c=r(97183),l=r(68157),u=r(41664),d=r(61715),o=r(34146),h=r(42952),x=r(57184),f=r(88916),m=r(71255),p=r(80275),j=r(87547),v=r(69980),g=l.Z.SubMenu,Z=c.Z.Sider,w=function(){var e,n,r=(0,i.useContext)(o.V),t=r[0],s=(r[1],(0,i.useState)(!1)),c=s[0],w=s[1],y=(0,i.useState)(""),b=y[0],C=y[1],N=(0,d.Lm)();(0,i.useEffect)((function(){C(window.location.pathname)}),[window.location.pathname]),(0,i.useEffect)((function(){N<800?w(!0):N>800&&w(!1)}),[N<800]);var S=function(e){return"".concat(b===e&&"active")};return(0,a.jsx)(Z,{collapsible:!0,collapsed:c,onCollapse:function(){return w(!c)},children:(0,a.jsxs)(l.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:c,children:[(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(h.Z,{}),children:(0,a.jsx)(u.default,{href:"/admin",children:(0,a.jsx)("a",{className:S("/admin"),children:"Dashboard"})})},"1"),(0,a.jsxs)(g,{icon:(0,a.jsx)(x.Z,{}),title:"Posts",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/posts",children:(0,a.jsx)("a",{className:S("/admin/posts"),children:"All Posts"})})},"3"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/posts/new",children:(0,a.jsx)("a",{className:S("/admin/posts/new"),children:"Add New"})})},"4"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/categories",children:(0,a.jsx)("a",{className:S("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,a.jsxs)(g,{icon:(0,a.jsx)(f.Z,{}),title:"Media",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/media/library",children:(0,a.jsx)("a",{className:S("/admin/media/library"),children:"Library"})})},"7"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/media/new",children:(0,a.jsx)("a",{className:S("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(m.Z,{}),children:(0,a.jsx)(u.default,{href:"/admin/comments",children:(0,a.jsx)("a",{className:S("/admin/comments"),children:"Comments"})})},"9"),(0,a.jsxs)(g,{icon:(0,a.jsx)(p.Z,{}),title:"Users",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/users",children:(0,a.jsx)("a",{className:S("/admin/users"),children:"All Users"})})},"11"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(u.default,{href:"/admin/users/new",children:(0,a.jsx)("a",{className:S("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(j.Z,{}),children:(0,a.jsx)(u.default,{href:"/admin/".concat(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e._id),children:(0,a.jsx)("a",{className:S("/admin/".concat(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(v.Z,{}),children:(0,a.jsx)(u.default,{href:"/admin/customize",children:(0,a.jsx)("a",{className:S("/admin/customize"),children:"Customize"})})},"14")]})})},y=r(11163),b=r(9669),C=r.n(b),N=r(27161);function S(e,n,r,t,s,a,i){try{var c=e[a](i),l=c.value}catch(u){return void r(u)}c.done?n(l):Promise.resolve(l).then(t,s)}var k=c.Z.Content;var I=function(e){var n=e.children,r=(0,i.useContext)(o.V),t=r[0],l=(r[1],(0,i.useState)(!0)),u=l[0],d=l[1],h=(0,y.useRouter)();(0,i.useEffect)((function(){(null===t||void 0===t?void 0:t.token)&&x()}),[null===t||void 0===t?void 0:t.token]);var x=function(){var e,n=(e=s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C().get("/current-admin");case 3:e.sent.data,d(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),h.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,r=arguments;return new Promise((function(t,s){var a=e.apply(n,r);function i(e){S(a,t,s,i,c,"next",e)}function c(e){S(a,t,s,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u?(0,a.jsx)(N.Z,{}):(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(w,{}),(0,a.jsx)(c.Z,{children:(0,a.jsx)(k,{style:{padding:"10px"},children:n})})]})}},42553:function(e,n,r){"use strict";r.r(n);var t=r(34051),s=r.n(t),a=r(85893),i=r(67294),c=r(21133),l=r(71230),u=r(15746),d=r(79531),o=r(71577),h=r(9835),x=r(87782),f=r(9669),m=r.n(f),p=r(74931),j=(r(11163),r(3269));function v(e,n,r,t,s,a,i){try{var c=e[a](i),l=c.value}catch(u){return void r(u)}c.done?n(l):Promise.resolve(l).then(t,s)}n.default=function(){var e=(0,i.useState)(""),n=e[0],r=e[1],t=(0,i.useState)(""),f=t[0],g=t[1],Z=(0,i.useState)(""),w=Z[0],y=Z[1],b=(0,i.useState)(j.generate({length:6})),C=b[0],N=b[1],S=(0,i.useState)(""),k=S[0],I=S[1],_=(0,i.useState)(!1),A=_[0],P=_[1],E=(0,i.useState)(!1),z=E[0],O=E[1],R=function(){var e,r=(e=s().mark((function e(r){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,O(!0),e.next=5,m().post("/create-user",{email:f,name:n,website:w,password:C,role:k,checked:A});case 5:(t=e.sent.data).error?(p.Am.error(t.error),O(!1)):(p.Am.success("User created successfully"),O(!1)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),p.Am.error("Signup failed. Try again."),O(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var n=this,r=arguments;return new Promise((function(t,s){var a=e.apply(n,r);function i(e){v(a,t,s,i,c,"next",e)}function c(e){v(a,t,s,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,a.jsx)(c.Z,{children:(0,a.jsx)(l.Z,{children:(0,a.jsxs)(u.Z,{span:12,offset:6,children:[(0,a.jsx)("h4",{style:{marginBottom:"-10px"},children:"Add new user"}),(0,a.jsx)(d.Z,{style:{margin:"20px 0px 10px 0px"},size:"large",placeholder:"Full name",value:n,onChange:function(e){return r(e.target.value)}}),(0,a.jsx)(d.Z,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Email",value:f,onChange:function(e){return g(e.target.value)}}),(0,a.jsx)(d.Z,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Website",value:w,onChange:function(e){return y(e.target.value)}}),(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(o.Z,{onClick:function(){return N(j.generate({length:6}))},type:"default",size:"large",style:{margin:"10px 0px 10px 0px"},children:"Generate password"}),(0,a.jsx)(d.Z.Password,{style:{margin:"10px 0px 10px 0px"},size:"large",placeholder:"Password",value:C,onChange:function(e){return N(e.target.value)}})]}),(0,a.jsxs)(h.Z,{defaultValue:"Subscriber",style:{margin:"10px 0px 10px 0px",width:"100%"},onChange:function(e){return I(e)},children:[(0,a.jsx)(h.Z.Option,{value:"Subscriber",children:"Subscriber"}),(0,a.jsx)(h.Z.Option,{value:"Author",children:"Author"}),(0,a.jsx)(h.Z.Option,{value:"Admin",children:"Admin"})]}),(0,a.jsx)(x.Z,{checked:A,onChange:function(e){return P(e.target.checked)},children:"Send the new user an email about their account."}),(0,a.jsx)(o.Z,{onClick:R,type:"default",style:{margin:"10px 0px 10px 0px"},loading:z,block:!0,children:"Submit"})]})})})}}},function(e){e.O(0,[3714,8773,8874,6994,9835,7306,9774,2888,179],(function(){return n=19791,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
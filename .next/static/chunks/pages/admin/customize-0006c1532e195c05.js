(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6866],{39214:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/customize",function(){return t(33303)}])},27161:function(e,n,t){"use strict";var r=t(85893),i=t(67294),a=t(11163);n.Z=function(e){var n=e.path,t=void 0===n?"/":n,o=(0,i.useState)(3),s=o[0],l=o[1],c=(0,a.useRouter)();return(0,i.useEffect)((function(){var e=setInterval((function(){l(s-1)}),1e3);return 0===s&&(clearInterval(e),c.push(t)),function(){return clearInterval(e)}}),[s]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsxs)("p",{children:["Redirecting in ",s," seconds"]})})}},21133:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(34051),i=t.n(r),a=t(85893),o=t(67294),s=t(97183),l=t(68157),c=t(41664),u=t(61715),d=t(34146),f=t(42952),h=t(57184),p=t(88916),m=t(71255),v=t(80275),x=t(87547),j=t(69980),g=l.Z.SubMenu,y=s.Z.Sider,b=function(){var e,n,t=(0,o.useContext)(d.V),r=t[0],i=(t[1],(0,o.useState)(!1)),s=i[0],b=i[1],w=(0,o.useState)(""),Z=w[0],S=w[1],C=(0,u.Lm)();(0,o.useEffect)((function(){S(window.location.pathname)}),[window.location.pathname]),(0,o.useEffect)((function(){C<800?b(!0):C>800&&b(!1)}),[C<800]);var I=function(e){return"".concat(Z===e&&"active")};return(0,a.jsx)(y,{collapsible:!0,collapsed:s,onCollapse:function(){return b(!s)},children:(0,a.jsxs)(l.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:s,children:[(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(f.Z,{}),children:(0,a.jsx)(c.default,{href:"/admin",children:(0,a.jsx)("a",{className:I("/admin"),children:"Dashboard"})})},"1"),(0,a.jsxs)(g,{icon:(0,a.jsx)(h.Z,{}),title:"Posts",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/posts",children:(0,a.jsx)("a",{className:I("/admin/posts"),children:"All Posts"})})},"3"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/posts/new",children:(0,a.jsx)("a",{className:I("/admin/posts/new"),children:"Add New"})})},"4"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/categories",children:(0,a.jsx)("a",{className:I("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,a.jsxs)(g,{icon:(0,a.jsx)(p.Z,{}),title:"Media",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/media/library",children:(0,a.jsx)("a",{className:I("/admin/media/library"),children:"Library"})})},"7"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/media/new",children:(0,a.jsx)("a",{className:I("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(m.Z,{}),children:(0,a.jsx)(c.default,{href:"/admin/comments",children:(0,a.jsx)("a",{className:I("/admin/comments"),children:"Comments"})})},"9"),(0,a.jsxs)(g,{icon:(0,a.jsx)(v.Z,{}),title:"Users",children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/users",children:(0,a.jsx)("a",{className:I("/admin/users"),children:"All Users"})})},"11"),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(c.default,{href:"/admin/users/new",children:(0,a.jsx)("a",{className:I("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(x.Z,{}),children:(0,a.jsx)(c.default,{href:"/admin/".concat(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e._id),children:(0,a.jsx)("a",{className:I("/admin/".concat(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,a.jsx)(l.Z.Item,{icon:(0,a.jsx)(j.Z,{}),children:(0,a.jsx)(c.default,{href:"/admin/customize",children:(0,a.jsx)("a",{className:I("/admin/customize"),children:"Customize"})})},"14")]})})},w=t(11163),Z=t(9669),S=t.n(Z),C=t(27161);function I(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void t(c)}s.done?n(l):Promise.resolve(l).then(r,i)}var k=s.Z.Content;var P=function(e){var n=e.children,t=(0,o.useContext)(d.V),r=t[0],l=(t[1],(0,o.useState)(!0)),c=l[0],u=l[1],f=(0,w.useRouter)();(0,o.useEffect)((function(){(null===r||void 0===r?void 0:r.token)&&h()}),[null===r||void 0===r?void 0:r.token]);var h=function(){var e,n=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S().get("/current-admin");case 3:e.sent.data,u(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),f.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){I(a,r,i,o,s,"next",e)}function s(e){I(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return c?(0,a.jsx)(C.Z,{}):(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(b,{}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(k,{style:{padding:"10px"},children:n})})]})}},66499:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),a=t(67294),o=t(9669),s=t.n(o);function l(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void t(c)}s.done?n(l):Promise.resolve(l).then(r,i)}n.Z=function(){var e=(0,a.useState)(""),n=e[0],t=e[1],r=(0,a.useState)(""),o=r[0],c=r[1],u=(0,a.useState)(""),d=u[0],f=u[1];(0,a.useEffect)((function(){h()}),[]);var h=function(){var e,n=(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().get("/page/home");case 3:n=e.sent.data,t(n.title),c(n.subtitle),f(n.fullWidthImage),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return{title:n,subtitle:o,fullWidthImage:d,setTitle:t,setSubtitle:c,setFullWidthImage:f}}},33303:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var r=t(34051),i=t.n(r),a=t(85893),o=t(67294),s=t(71230),l=t(15746),c=t(27049),u=t(79531),d=t(71577),f=t(67691),h=t(16536),p=t(84551),m=t(34146),v=t(88484),x=t(76329),j=t(11163);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var n=e.redirectToLibrary,t=void 0!==n&&n,r=e.page,i=void 0===r?"admin":r,s=(0,o.useContext)(m.V),l=s[0],c=(s[1],(0,o.useContext)(x.Y)),u=c[0],f=c[1],g=(0,j.useRouter)(),w={name:"file",action:"".concat("http://localhost:8000/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(l.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(h.ZP.success("".concat(e.file.name," file uploaded successfully")),f({images:b(u.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1}),t&&g.push("/".concat(i,"/media/library"))):"error"===e.file.status&&h.ZP.error("".concat(e.file.name," file upload failed."))}};return(0,a.jsx)(p.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){y(e,n,t[n])}))}return e}({},w,{maxCount:1,children:(0,a.jsx)(d.Z,{icon:(0,a.jsx)(v.Z,{}),children:"Click to Upload"})}))},Z=t(63922),S=t(64082),C=t(18429),I=t(9669),k=t.n(I),P=t(74931);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void t(c)}s.done?n(l):Promise.resolve(l).then(r,i)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){O(a,r,i,o,s,"next",e)}function s(e){O(a,r,i,o,s,"throw",e)}o(void 0)}))}}function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){_(e,n,t[n])}))}return e}function T(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=p.Z.Dragger,M=function(e){var n,t=e.page,r=void 0===t?"admin":t,s=(0,o.useContext)(m.V),l=s[0],c=(s[1],(0,o.useContext)(x.Y)),u=c[0],d=c[1],p=(0,o.useState)(!1),v=p[0];p[1];(0,o.useEffect)((function(){var e=function(){var e=N(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().get("/media");case 3:n=e.sent.data,d((function(e){return E({},e,{images:n})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var j={name:"file",multiple:!0,action:"".concat("http://localhost:8000/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(l.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(h.ZP.success("".concat(e.file.name," file uploaded successfully")),d({images:T(u.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&h.ZP.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},g=function(){var e=N(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().delete("/media/".concat(n));case 3:e.sent.data.ok&&(d(E({},u,{images:u.images.filter((function(e){return e._id!==n})),selected:null})),P.Am.error("Image deleted successfully")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(z,E({},j,{accept:"image/*",children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(S.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})),(0,a.jsx)("div",{style:{textAlign:"center"},children:null===u||void 0===u||null===(n=u.images)||void 0===n?void 0:n.map((function(e){var n,t;return(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(f.Z,{onClick:function(){return d(E({},u,{selected:e}))},preview:v,src:e.url,style:{paddingTop:5,paddingRight:10,height:"100px",width:"100px",objectFit:"cover",cursor:"pointer"}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"author"===r&&(null===e||void 0===e||null===(n=e.postedBy)||void 0===n?void 0:n._id)==(null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t._id)||"admin"===r?(0,a.jsx)(C.Z,{onClick:function(){return g(e._id)},style:{marginTop:"5px",color:"#f5222d"}}):""]})}))})]})},D=t(74687),L=D.Z.TabPane,U=function(e){e.page;return(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(L,{tab:"Upload File",children:(0,a.jsx)(w,{})},"1"),(0,a.jsx)(L,{tab:"Media Library",children:(0,a.jsx)(M,{})},"2")]})},W=t(21133),F=t(66499);function R(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void t(c)}s.done?n(l):Promise.resolve(l).then(r,i)}var V=function(){var e,n=(0,o.useContext)(x.Y),t=n[0],r=(n[1],(0,o.useState)("")),h=r[0],p=r[1],m=(0,F.Z)(),v=m.title,j=m.subtitle,g=m.fullWidthImage,y=m.setTitle,b=m.setSubtitle,w=(m.setFullWidthImage,function(){var e,n=(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=5,k().post("/page",{page:"home",title:v,subtitle:j,fullWidthImage:null===t||void 0===t||null===(n=t.selected)||void 0===n?void 0:n._id});case 5:e.sent.data,p(!1),P.ZP.success("Saved"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),p(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){R(a,r,i,o,s,"next",e)}function s(e){R(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}());return(0,a.jsx)(W.Z,{children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(l.Z,{span:24,children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)("h1",{children:"Customize home page"}),(0,a.jsx)("p",{children:"Set full width image title and subtitle"})]})}),(0,a.jsxs)(l.Z,{span:18,children:[(0,a.jsx)(U,{}),(0,a.jsx)(u.Z,{style:{margin:"20px 0px 20px 0px"},size:"large",placeholder:"Give it a title",value:v,onChange:function(e){return y(e.target.value)}}),(0,a.jsx)(u.Z,{size:"large",placeholder:"Give it a subtitle",value:j,onChange:function(e){return b(e.target.value)}}),(0,a.jsx)(d.Z,{onClick:w,type:"default",style:{margin:"10px 0px 10px 0px"},loading:h,block:!0,children:"Save"})]}),(0,a.jsx)(l.Z,{span:6,children:(0,a.jsx)("div",{style:{margin:"40px 0px 0px 20px"},children:(null===t||void 0===t?void 0:t.selected)?(0,a.jsx)(f.Z,{width:"100%",src:null===t||void 0===t||null===(e=t.selected)||void 0===e?void 0:e.url}):g?(0,a.jsx)(f.Z,{width:"100%",src:g.url}):""})})]})})}}},function(e){e.O(0,[8773,8874,6994,8231,7910,4209,4551,4687,301,5119,9774,2888,179],(function(){return n=39214,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
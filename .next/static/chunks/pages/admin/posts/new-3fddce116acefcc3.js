(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7745],{69980:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(1413),i=t(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},a=t(42135),c=function(e,n){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:s}))};c.displayName="BgColorsOutlined";var o=i.forwardRef(c)},80275:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(1413),i=t(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},a=t(42135),c=function(e,n){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:s}))};c.displayName="UserSwitchOutlined";var o=i.forwardRef(c)},56310:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts/new",function(){return t(2218)}])},21133:function(e,n,t){"use strict";t.d(n,{Z:function(){return O}});var r=t(34051),i=t.n(r),s=t(85893),a=t(67294),c=t(97183),o=t(68157),l=t(41664),u=t(61715),d=t(34146),f=t(42952),h=t(57184),m=t(88916),x=t(71255),p=t(80275),v=t(87547),j=t(69980),g=o.Z.SubMenu,w=c.Z.Sider,Z=function(){var e,n,t=(0,a.useContext)(d.V),r=t[0],i=(t[1],(0,a.useState)(!1)),c=i[0],Z=i[1],y=(0,a.useState)(""),b=y[0],S=y[1],N=(0,u.Lm)();(0,a.useEffect)((function(){S(window.location.pathname)}),[window.location.pathname]),(0,a.useEffect)((function(){N<800?Z(!0):N>800&&Z(!1)}),[N<800]);var C=function(e){return"".concat(b===e&&"active")};return(0,s.jsx)(w,{collapsible:!0,collapsed:c,onCollapse:function(){return Z(!c)},children:(0,s.jsxs)(o.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:c,children:[(0,s.jsx)(o.Z.Item,{icon:(0,s.jsx)(f.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin",children:(0,s.jsx)("a",{className:C("/admin"),children:"Dashboard"})})},"1"),(0,s.jsxs)(g,{icon:(0,s.jsx)(h.Z,{}),title:"Posts",children:[(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/posts",children:(0,s.jsx)("a",{className:C("/admin/posts"),children:"All Posts"})})},"3"),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/posts/new",children:(0,s.jsx)("a",{className:C("/admin/posts/new"),children:"Add New"})})},"4"),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/categories",children:(0,s.jsx)("a",{className:C("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,s.jsxs)(g,{icon:(0,s.jsx)(m.Z,{}),title:"Media",children:[(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/media/library",children:(0,s.jsx)("a",{className:C("/admin/media/library"),children:"Library"})})},"7"),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/media/new",children:(0,s.jsx)("a",{className:C("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,s.jsx)(o.Z.Item,{icon:(0,s.jsx)(x.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/comments",children:(0,s.jsx)("a",{className:C("/admin/comments"),children:"Comments"})})},"9"),(0,s.jsxs)(g,{icon:(0,s.jsx)(p.Z,{}),title:"Users",children:[(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/users",children:(0,s.jsx)("a",{className:C("/admin/users"),children:"All Users"})})},"11"),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/users/new",children:(0,s.jsx)("a",{className:C("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,s.jsx)(o.Z.Item,{icon:(0,s.jsx)(v.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/".concat(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e._id),children:(0,s.jsx)("a",{className:C("/admin/".concat(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,s.jsx)(o.Z.Item,{icon:(0,s.jsx)(j.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/customize",children:(0,s.jsx)("a",{className:C("/admin/customize"),children:"Customize"})})},"14")]})})},y=t(11163),b=t(9669),S=t.n(b),N=t(27161);function C(e,n,t,r,i,s,a){try{var c=e[s](a),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,i)}var I=c.Z.Content;var O=function(e){var n=e.children,t=(0,a.useContext)(d.V),r=t[0],o=(t[1],(0,a.useState)(!0)),l=o[0],u=o[1],f=(0,y.useRouter)();(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.token)&&h()}),[null===r||void 0===r?void 0:r.token]);var h=function(){var e,n=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S().get("/current-admin");case 3:e.sent.data,u(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),f.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){C(s,r,i,a,c,"next",e)}function c(e){C(s,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return l?(0,s.jsx)(N.Z,{}):(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(Z,{}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(I,{style:{padding:"10px"},children:n})})]})}},9911:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),s=t(85893),a=t(67294),c=t(9835),o=t(97183),l=t(71230),u=t(15746),d=t(79531),f=t(71577),h=t(67691),m=t(14538),x=t(28819),p=t.n(x),v=t(5162),j=t(9669),g=t.n(j),w=t(45771),Z=t(74931),y=t(11163),b=t(88484),S=t(16853),N=t(76329);function C(e,n,t,r,i,s,a){try{var c=e[s](a),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,i)}function I(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){C(s,r,i,a,c,"next",e)}function c(e){C(s,r,i,a,c,"throw",e)}a(void 0)}))}}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){O(e,n,t[n])}))}return e}var P=c.Z.Option;o.Z.Content,o.Z.Sider;n.Z=function(e){var n,t=e.page,r=void 0===t?"admin":t,o=(0,a.useContext)(v.N),x=o[0],j=(o[1],(0,a.useContext)(N.Y)),C=j[0],O=j[1],M=(0,a.useState)(function(){if(localStorage.getItem("post-title"))return JSON.parse(localStorage.getItem("post-title"))}()),_=M[0],z=M[1],E=(0,a.useState)(function(){if(localStorage.getItem("post-content"))return JSON.parse(localStorage.getItem("post-content"))}()),A=E[0],H=E[1],J=(0,a.useState)([]),R=J[0],T=J[1],V=(0,a.useState)([]),B=V[0],U=V[1],D=(0,a.useState)(!1),L=D[0],X=D[1],F=(0,a.useState)(!1),G=F[0],K=F[1],Y=(0,y.useRouter)();(0,a.useEffect)((function(){q()}),[]);var q=function(){var e=I(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().get("/categories");case 3:n=e.sent.data,U(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=I(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(!0),e.next=5,g().post("/create-post",{title:_,content:A,categories:R,featuredImage:null===C||void 0===C||null===(n=C.selected)||void 0===n?void 0:n._id});case 5:(null===(t=e.sent.data)||void 0===t?void 0:t.error)?(Z.Am.error(null===t||void 0===t?void 0:t.error),K(!1)):(Z.Am.success("Post created successfully"),localStorage.removeItem("post-title"),localStorage.removeItem("post-content"),O(k({},C,{selected:null})),Y.push("/".concat(r,"/posts"))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),Z.Am.error("Post create failed. Try again."),K(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(u.Z,{span:14,offset:1,children:[(0,s.jsx)("h1",{children:"Create new post"}),(0,s.jsx)(d.Z,{size:"large",value:_,placeholder:"Give your post a title",onChange:function(e){z(e.target.value),localStorage.setItem("post-title",JSON.stringify(e.target.value))}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"editor-scroll",children:(0,s.jsx)(p(),{dark:"light"!==x,defaultValue:A,onChange:function(e){H(e()),localStorage.setItem("post-content",JSON.stringify(e()))},uploadImage:w.I})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}),(0,s.jsxs)(u.Z,{span:6,offset:1,children:[(0,s.jsx)(f.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return X(!0)},children:"Preview"}),(0,s.jsxs)(f.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return O(k({},C,{showMediaModal:!0}))},children:[(0,s.jsx)(b.Z,{})," Featured Image"]}),(0,s.jsx)("h4",{children:"Categories"}),(0,s.jsx)(c.Z,{mode:"multiple",allowClear:!0,placeholder:"Select categories",style:{width:"100%"},onChange:function(e){return T(e)},children:B.map((function(e){return(0,s.jsx)(P,{children:e.name},e.name)}))}),(null===C||void 0===C?void 0:C.selected)&&(0,s.jsx)("div",{style:{marginTop:"15px"},children:(0,s.jsx)(h.Z,{width:"100%",src:null===C||void 0===C||null===(n=C.selected)||void 0===n?void 0:n.url})}),(0,s.jsx)(f.Z,{loading:G,style:{margin:"10px 0px 10px 0px",width:"100%"},type:"primary",onClick:Q,children:"Publish"})]}),(0,s.jsxs)(m.Z,{title:"Preview",centered:!0,visible:L,onOk:function(){return X(!1)},onCancel:function(){return X(!1)},width:720,footer:null,children:[(0,s.jsx)("h1",{children:_}),(0,s.jsx)(p(),{dark:"light"!==x,defaultValue:A,readOnly:!0})]}),(0,s.jsx)(m.Z,{visible:C.showMediaModal,title:"Media",onOk:function(){return O(k({},C,{showMediaModal:!1}))},onCancel:function(){return O(k({},C,{showMediaModal:!1}))},width:720,footer:null,children:(0,s.jsx)(S.Z,{})})]})}},2218:function(e,n,t){"use strict";t.r(n);var r=t(85893),i=t(21133),s=t(9911);n.default=function(){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(s.Z,{})})}}},function(e){e.O(0,[5453,7624,8773,8874,6994,9835,8231,7910,4209,4551,4687,301,8973,8819,7594,9774,2888,179],(function(){return n=56310,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
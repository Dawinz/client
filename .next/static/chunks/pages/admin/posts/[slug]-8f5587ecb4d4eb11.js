(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{69980:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(1413),i=t(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},a=t(42135),o=function(e,n){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:s}))};o.displayName="BgColorsOutlined";var c=i.forwardRef(o)},80275:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(1413),i=t(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},a=t(42135),o=function(e,n){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:s}))};o.displayName="UserSwitchOutlined";var c=i.forwardRef(o)},10977:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts/[slug]",function(){return t(80554)}])},21133:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var r=t(34051),i=t.n(r),s=t(85893),a=t(67294),o=t(97183),c=t(68157),l=t(41664),u=t(61715),d=t(34146),f=t(42952),h=t(57184),m=t(88916),v=t(71255),x=t(80275),p=t(87547),j=t(69980),g=c.Z.SubMenu,w=o.Z.Sider,y=function(){var e,n,t=(0,a.useContext)(d.V),r=t[0],i=(t[1],(0,a.useState)(!1)),o=i[0],y=i[1],Z=(0,a.useState)(""),b=Z[0],S=Z[1],C=(0,u.Lm)();(0,a.useEffect)((function(){S(window.location.pathname)}),[window.location.pathname]),(0,a.useEffect)((function(){C<800?y(!0):C>800&&y(!1)}),[C<800]);var N=function(e){return"".concat(b===e&&"active")};return(0,s.jsx)(w,{collapsible:!0,collapsed:o,onCollapse:function(){return y(!o)},children:(0,s.jsxs)(c.Z,{defaultOpenKeys:["2","6","10"],mode:"inline",inlineCollapsed:o,children:[(0,s.jsx)(c.Z.Item,{icon:(0,s.jsx)(f.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin",children:(0,s.jsx)("a",{className:N("/admin"),children:"Dashboard"})})},"1"),(0,s.jsxs)(g,{icon:(0,s.jsx)(h.Z,{}),title:"Posts",children:[(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/posts",children:(0,s.jsx)("a",{className:N("/admin/posts"),children:"All Posts"})})},"3"),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/posts/new",children:(0,s.jsx)("a",{className:N("/admin/posts/new"),children:"Add New"})})},"4"),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/categories",children:(0,s.jsx)("a",{className:N("/admin/categories"),children:"Categories"})})},"5")]},"2"),(0,s.jsxs)(g,{icon:(0,s.jsx)(m.Z,{}),title:"Media",children:[(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/media/library",children:(0,s.jsx)("a",{className:N("/admin/media/library"),children:"Library"})})},"7"),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/media/new",children:(0,s.jsx)("a",{className:N("/admin/media/new"),children:"Add New"})})},"8")]},"6"),(0,s.jsx)(c.Z.Item,{icon:(0,s.jsx)(v.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/comments",children:(0,s.jsx)("a",{className:N("/admin/comments"),children:"Comments"})})},"9"),(0,s.jsxs)(g,{icon:(0,s.jsx)(x.Z,{}),title:"Users",children:[(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/users",children:(0,s.jsx)("a",{className:N("/admin/users"),children:"All Users"})})},"11"),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(l.default,{href:"/admin/users/new",children:(0,s.jsx)("a",{className:N("/admin/users/new"),children:"Add New"})})},"12")]},"10"),(0,s.jsx)(c.Z.Item,{icon:(0,s.jsx)(p.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/".concat(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e._id),children:(0,s.jsx)("a",{className:N("/admin/".concat(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n._id)),children:"Profile"})})},"13"),(0,s.jsx)(c.Z.Item,{icon:(0,s.jsx)(j.Z,{}),children:(0,s.jsx)(l.default,{href:"/admin/customize",children:(0,s.jsx)("a",{className:N("/admin/customize"),children:"Customize"})})},"14")]})})},Z=t(11163),b=t(9669),S=t.n(b),C=t(27161);function N(e,n,t,r,i,s,a){try{var o=e[s](a),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,i)}var O=o.Z.Content;var k=function(e){var n=e.children,t=(0,a.useContext)(d.V),r=t[0],c=(t[1],(0,a.useState)(!0)),l=c[0],u=c[1],f=(0,Z.useRouter)();(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.token)&&h()}),[null===r||void 0===r?void 0:r.token]);var h=function(){var e,n=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S().get("/current-admin");case 3:e.sent.data,u(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),f.push("/");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){N(s,r,i,a,o,"next",e)}function o(e){N(s,r,i,a,o,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return l?(0,s.jsx)(C.Z,{}):(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(y,{}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(O,{style:{padding:"10px"},children:n})})]})}},33875:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),s=t(85893),a=t(67294),o=t(9835),c=t(71230),l=t(15746),u=t(79531),d=t(71577),f=t(67691),h=t(14538),m=t(28819),v=t.n(m),x=t(5162),p=t(9669),j=t.n(p),g=t(45771),w=t(74931),y=t(11163),Z=t(88484),b=t(16853),S=t(76329);function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function N(e,n,t,r,i,s,a){try{var o=e[s](a),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,i)}function O(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){N(s,r,i,a,o,"next",e)}function o(e){N(s,r,i,a,o,"throw",e)}a(void 0)}))}}function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=o.Z.Option;n.Z=function(e){var n,t,r=e.page,m=void 0===r?"admin":r,p=(0,a.useContext)(x.N),C=p[0],N=(p[1],(0,a.useContext)(S.Y)),k=N[0],A=N[1],E=(0,a.useState)(""),M=E[0],z=E[1],T=(0,a.useState)(""),R=T[0],H=T[1],U=(0,a.useState)(""),V=U[0],B=U[1],D=(0,a.useState)([]),L=D[0],q=D[1],F=(0,a.useState)([]),G=F[0],J=F[1],X=(0,a.useState)({}),K=X[0],Y=X[1],$=(0,a.useState)(!1),Q=$[0],W=$[1],ee=(0,a.useState)(!0),ne=ee[0],te=ee[1],re=(0,y.useRouter)();(0,a.useEffect)((function(){ie()}),[null===re||void 0===re||null===(n=re.query)||void 0===n?void 0:n.slug]),(0,a.useEffect)((function(){se()}),[]);var ie=function(){var e=O(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().get("/post/".concat(re.query.slug));case 3:n=e.sent.data,console.log("GOT POST FOR EDIT",n),H(n.post.title),B(n.post.content),Y(n.post.featuredImage),z(n._id),t=[],n.post.categories.map((function(e){return t.push(e.name)})),q(t),te(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=O(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j().get("/categories");case 3:n=e.sent.data,J(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=O(i().mark((function e(){var n,t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,te(!0),e.next=5,j().put("/edit-post/".concat(M),{title:R,content:V,categories:L,featuredImage:(null===k||void 0===k||null===(n=k.selected)||void 0===n?void 0:n._id)?null===k||void 0===k||null===(t=k.selected)||void 0===t?void 0:t._id:(null===K||void 0===K?void 0:K._id)?K._id:void 0});case 5:(null===(r=e.sent.data)||void 0===r?void 0:r.error)?(w.Am.error(null===r||void 0===r?void 0:r.error),te(!1)):(w.Am.success("Post updated successfully"),A(I({},k,{selected:null})),re.push("/".concat(m,"/posts"))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),w.Am.error("Post create failed. Try again."),te(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)(l.Z,{span:14,offset:1,children:[(0,s.jsx)("h1",{children:"Edit post"}),(0,s.jsx)(u.Z,{size:"large",value:R,placeholder:"Give your post a title",onChange:function(e){H(e.target.value),localStorage.setItem("post-title",JSON.stringify(e.target.value))}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),ne?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsx)("div",{className:"editor-scroll",children:(0,s.jsx)(v(),{dark:"light"!==C,defaultValue:V,onChange:function(e){B(e()),localStorage.setItem("post-content",JSON.stringify(e()))},uploadImage:g.I})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}),(0,s.jsxs)(l.Z,{span:6,offset:1,children:[(0,s.jsx)(d.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return W(!0)},children:"Preview"}),(0,s.jsxs)(d.Z,{style:{margin:"10px 0px 10px 0px",width:"100%"},onClick:function(){return A(I({},k,{showMediaModal:!0}))},children:[(0,s.jsx)(Z.Z,{})," Featured Image"]}),(0,s.jsx)("h4",{children:"Categories"}),(0,s.jsx)(o.Z,{mode:"multiple",allowClear:!0,placeholder:"Select categories",style:{width:"100%"},onChange:function(e){return q(e)},value:P(L),children:G.map((function(e){return(0,s.jsx)(_,{children:e.name},e.name)}))}),(null===k||void 0===k?void 0:k.selected)?(0,s.jsx)("div",{style:{marginTop:"15px"},children:(0,s.jsx)(f.Z,{width:"100%",src:null===k||void 0===k||null===(t=k.selected)||void 0===t?void 0:t.url})}):(null===K||void 0===K?void 0:K.url)?(0,s.jsx)("div",{style:{marginTop:"15px"},children:(0,s.jsx)(f.Z,{width:"100%",src:null===K||void 0===K?void 0:K.url})}):"",(0,s.jsx)(d.Z,{loading:ne,style:{margin:"10px 0px 10px 0px",width:"100%"},type:"primary",onClick:ae,children:"Publish"})]}),(0,s.jsxs)(h.Z,{title:"Preview",centered:!0,visible:Q,onOk:function(){return W(!1)},onCancel:function(){return W(!1)},width:720,footer:null,children:[(0,s.jsx)("h1",{children:R}),(0,s.jsx)(v(),{dark:"light"!==C,defaultValue:V,readOnly:!0})]}),(0,s.jsx)(h.Z,{visible:k.showMediaModal,title:"Media",onOk:function(){return A(I({},k,{showMediaModal:!1}))},onCancel:function(){return A(I({},k,{showMediaModal:!1}))},width:720,footer:null,children:(0,s.jsx)(b.Z,{})})]})}},80554:function(e,n,t){"use strict";t.r(n);var r=t(85893),i=t(21133),s=t(33875);n.default=function(){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(s.Z,{})})}}},function(e){e.O(0,[5453,7624,8773,8874,6994,9835,8231,7910,4209,4551,4687,301,8973,8819,7594,9774,2888,179],(function(){return n=10977,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
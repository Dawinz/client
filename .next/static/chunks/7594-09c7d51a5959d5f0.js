(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7594],{88916:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},i=n(42135),c=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};c.displayName="CameraOutlined";var l=a.forwardRef(c)},57184:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},i=n(42135),c=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};c.displayName="PushpinOutlined";var l=a.forwardRef(c)},88484:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=n(42135),c=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};c.displayName="UploadOutlined";var l=a.forwardRef(c)},33448:function(e,t,n){var r=n(44239),a=n(37005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},27161:function(e,t,n){"use strict";var r=n(85893),a=n(67294),o=n(11163);t.Z=function(e){var t=e.path,n=void 0===t?"/":t,i=(0,a.useState)(3),c=i[0],l=i[1],u=(0,o.useRouter)();return(0,a.useEffect)((function(){var e=setInterval((function(){l(c-1)}),1e3);return 0===c&&(clearInterval(e),u.push(n)),function(){return clearInterval(e)}}),[c]),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsxs)("p",{children:["Redirecting in ",c," seconds"]})})}},47665:function(e,t,n){"use strict";var r=n(34051),a=n.n(r),o=n(85893),i=n(67294),c=n(84551),l=n(16536),u=n(63922),s=n(67691),f=n(34146),d=n(64082),h=n(18429),p=n(76329),v=n(9669),g=n.n(v),m=n(74931);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function Z(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=c.Z.Dragger;t.Z=function(e){var t,n=e.page,r=void 0===n?"admin":n,c=(0,i.useContext)(f.V),v=c[0],y=(c[1],(0,i.useContext)(p.Y)),b=y[0],j=y[1],k=(0,i.useState)(!1),A=k[0];k[1];(0,i.useEffect)((function(){var e=function(){var e=w(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().get("/media");case 3:t=e.sent.data,j((function(e){return x({},e,{images:t})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P={name:"file",multiple:!0,action:"".concat("http://localhost:8000/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(v.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(l.ZP.success("".concat(e.file.name," file uploaded successfully")),j({images:Z(b.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1})):"error"===e.file.status&&l.ZP.error("".concat(e.file.name," file upload failed."))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},S=function(){var e=w(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g().delete("/media/".concat(t));case 3:e.sent.data.ok&&(j(x({},b,{images:b.images.filter((function(e){return e._id!==t})),selected:null})),m.Am.error("Image deleted successfully")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(O,x({},P,{accept:"image/*",children:[(0,o.jsx)("p",{className:"ant-upload-drag-icon",children:(0,o.jsx)(d.Z,{})}),(0,o.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})),(0,o.jsx)("div",{style:{textAlign:"center"},children:null===b||void 0===b||null===(t=b.images)||void 0===t?void 0:t.map((function(e){var t,n;return(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(s.Z,{onClick:function(){return j(x({},b,{selected:e}))},preview:A,src:e.url,style:{paddingTop:5,paddingRight:10,height:"100px",width:"100px",objectFit:"cover",cursor:"pointer"}}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"author"===r&&(null===e||void 0===e||null===(t=e.postedBy)||void 0===t?void 0:t._id)==(null===v||void 0===v||null===(n=v.user)||void 0===n?void 0:n._id)||"admin"===r?(0,o.jsx)(h.Z,{onClick:function(){return S(e._id)},style:{marginTop:"5px",color:"#f5222d"}}):""]})}))})]})}},34808:function(e,t,n){"use strict";var r=n(85893),a=n(67294),o=n(16536),i=n(84551),c=n(71577),l=n(34146),u=n(88484),s=n(76329),f=n(11163);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(e){var t=e.redirectToLibrary,n=void 0!==t&&t,d=e.page,v=void 0===d?"admin":d,g=(0,a.useContext)(l.V),m=g[0],y=(g[1],(0,a.useContext)(s.Y)),b=y[0],w=y[1],j=(0,f.useRouter)(),x={name:"file",action:"".concat("http://localhost:8000/api","/upload-image-file"),headers:{Authorization:"Bearer ".concat(m.token)},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(o.ZP.success("".concat(e.file.name," file uploaded successfully")),w({images:p(b.images).concat([e.file.response]),selected:e.file.response,showMediaModal:!1}),n&&j.push("/".concat(v,"/media/library"))):"error"===e.file.status&&o.ZP.error("".concat(e.file.name," file upload failed."))}};return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},x,{maxCount:1,children:(0,r.jsx)(c.Z,{icon:(0,r.jsx)(u.Z,{}),children:"Click to Upload"})}))}},16853:function(e,t,n){"use strict";var r=n(85893),a=(n(67294),n(34808)),o=n(47665),i=n(74687),c=i.Z.TabPane;t.Z=function(e){e.page;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(c,{tab:"Upload File",children:(0,r.jsx)(a.Z,{})},"1"),(0,r.jsx)(c,{tab:"Media Library",children:(0,r.jsx)(o.Z,{})},"2")]})}},45771:function(e,t,n){"use strict";n.d(t,{I:function(){return f}});var r=n(34051),a=n.n(r),o=n(76770),i=n.n(o),c=n(9669),l=n.n(c);function u(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,a)}var s=function(e){return new Promise((function(t){i().imageFileResizer(e,720,400,"JPEG",100,0,(function(e){t(e)}),"base64")}))},f=function(){var e,t=(e=a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:return n=e.sent,e.next=6,l().post("/upload-image",{image:n});case 6:return r=e.sent.data,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,c,"next",e)}function c(e){u(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},76770:function(e){(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{default:()=>a});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t;return t=[{key:"changeHeightWidth",value:function(e,t,n,r,a,o){return n>r&&(e=Math.round(e*r/n),n=r),e>t&&(n=Math.round(n*t/e),e=t),a&&n<a&&(e=Math.round(e*a/n),n=a),o&&e<o&&(n=Math.round(n*o/e),e=o),{height:e,width:n}}},{key:"resizeAndRotateImage",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=i/100,u=document.createElement("canvas"),s=e.width,f=e.height,d=this.changeHeightWidth(f,n,s,t,r,a);!c||90!==c&&270!==c?(u.width=d.width,u.height=d.height):(u.width=d.height,u.height=d.width),s=d.width,f=d.height;var h=u.getContext("2d");return h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,s,f),c&&(h.rotate(c*Math.PI/180),90===c?h.translate(0,-u.width):180===c?h.translate(-u.width,-u.height):270===c?h.translate(-u.height,0):0!==c&&360!==c||h.translate(0,0)),h.drawImage(e,0,0,s,f),u.toDataURL("image/".concat(o),l)}},{key:"b64toByteArrays",value:function(e,t){t=t||"image/jpeg";for(var n=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],a=0;a<n.length;a+=512){for(var o=n.slice(a,a+512),i=new Array(o.length),c=0;c<o.length;c++)i[c]=o.charCodeAt(c);var l=new Uint8Array(i);r.push(l)}return r}},{key:"b64toBlob",value:function(e,t){var n=this.b64toByteArrays(e,t);return new Blob(n,{type:t,lastModified:new Date})}},{key:"b64toFile",value:function(e,t,n){var r=this.b64toByteArrays(e,n);return new File(r,t,{type:n,lastModified:new Date})}},{key:"createResizedImage",value:function(t,n,r,a,o,i,c){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,f=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");f.readAsDataURL(t),f.onload=function(){var d=new Image;d.src=f.result,d.onload=function(){var f=e.resizeAndRotateImage(d,n,r,u,s,a,o,i),h="image/".concat(a);switch(l){case"blob":var p=e.b64toBlob(f,h);c(p);break;case"base64":default:c(f);break;case"file":var v=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(a.toString()),g=e.b64toFile(f,v,h);c(g)}}},f.onerror=function(e){throw Error(e)}}}],t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,t),e}();const a={imageFileResizer:function(e,t,n,a,o,i,c,l,u,s){return r.createResizedImage(e,t,n,a,o,i,c,l,u,s)}};e.exports=n})()}}]);